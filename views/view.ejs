<%- include("partials/header") -%> 

<body>
  <div class="p-5">
    <div class="container-fluid py-5">
      <h1 class="display-5 fw-bold"><%=course.id + ': ' + course.name %></h1>
      <p class="col-md-8 fs-4"><%='Description: '+ course.description %></p>
      <p class="col-md-8 fs-4"><%='Prerequisites: '+ course.prerequisites %></p>
    </div>
  </div> 

  <% if (review.length != 0) { %>
    <div class="pt-5 pb-5">
      <div id="carousel-container" class="container">
        <div class="row" style="height: 100%;">
          <div class="col-12">
            <div id="carouselExampleIndicators2" class="carousel slide" data-ride="carousel" data-bs-interval="false">
              <div class="carousel-inner">
                <% for (var i = 0; i < review.length; i++) { %>
                  <% if (i == 0) { %>
                <div class="carousel-item active">
                  <div class="row">
                  <% } else if (i != 0 && i % 3 === 0){ %>
                <div class="carousel-item">
                  <div class="row">
                  <% }%>
                    <div class="col-md-4 mb-3">
                        <div class="card">
                          <div class="card-header">
                            <% for (var j = 1; j <= 5; j++) { %>
                              <% if (j <= review[i].rating) { %>
                                <i class="yellow fas fa-star"></i> 
                              <% } else { %>
                                <i class="fas fa-star"></i>
                              <% } %>
                            <% } %> 
                          </div>
                          <div class="card-body">
                            <h4 class="card-title"><%= review[i].description %></h4>
                            <p class="card-text"><%= "Last updated " + Math.round((Date.now() - review[i].date) / (1000 * 3600 * 24)) + " days ago" %></p>
                          </div>
                        </div>
                    </div>
                  <% if ((i + 1) == review.length || (i + 1) % 3 === 0) { %>
                    </div>
                  </div>
                  <% } %>
                <% } %>
            </div>
          </div>
        </div>
      </div>
      <% if (review.length > 3) { %>
      <button class="control btn btn-primary carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators2" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      </button>
      <button class="control btn btn-primary carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators2" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
      </button>
      <% } %>
    </div>
</div>
<div id="btn-row">
  <button type="button" class="home btn btn-secondary btn-lg">Home</button>
  <button type="button" class="post-review btn btn-secondary btn-lg">Add Review</button>
</div>
  <% } else { %>
    <div style="text-align: center; padding: 3%;">
      <h1>There aren't any reviews for this class yet!</h1>
      <p>Be the first to make a post!</p>
      <button style="width: 7%;" type="button" class="home btn btn-secondary btn-lg">Home</button>
      <button style="width: 7%" type="button" class="post-review btn btn-secondary btn-lg">Add Review</button>
    </div>
  <% } %>    
</body>

<%- include("partials/footer") -%> 